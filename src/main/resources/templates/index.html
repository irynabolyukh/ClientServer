<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Client Server</title>-->
<!--    <style>-->
<!--        .container{-->
<!--            margin: 0 auto;-->
<!--            font-size: 22px;-->
<!--        }-->

<!--        h1,h2,h3,h4{-->
<!--            text-align: center;-->
<!--        }-->
<!--        table, form {-->
<!--            margin: 0 auto;-->
<!--            text-align: center;-->
<!--        }-->
<!--        table{-->
<!--            margin-bottom: 50px;-->
<!--            border: 1px solid black;-->
<!--            border-collapse: collapse;-->
<!--        }-->
<!--        th, td{-->
<!--            padding: 5px;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>-->
<!--<div class="container">-->
<!--    <h2>All Students</h2>-->
<!--    <table>-->
<!--        <thead>-->
<!--            <th>ID</th>-->
<!--            <th>FIO</th>-->
<!--            <th>COURSE</th>-->
<!--        </thead>-->
<!--        <tbody id="students">-->
<!--        </tbody>-->
<!--    </table>-->
<!--</div>-->
<!--<div class="container">-->
<!--    <form id="getStudentInfo">-->
<!--        <label for="id">Student ID:</label>-->
<!--        <input type="text" id="id" name="id">-->
<!--        <button type="submit">Get Info</button>-->
<!--    </form>-->
<!--</div>-->
<!--<div class="container">-->
<!--    <div id="studentInfo">-->
<!--    </div>-->
<!--    <div id="studentTableInfo"  class="container">-->
<!--        <table>-->
<!--            <thead>-->
<!--                <th>DISCIPLINE</th>-->
<!--                <th>CREDITS</th>-->
<!--                <th>GRADE</th>-->
<!--            </thead>-->
<!--            <tbody id="disciplines">-->
<!--            </tbody>-->
<!--        </table>-->
<!--    </div>-->
<!--</div>-->
<!--<script>-->
<!--    $(document).ready(-->
<!--        () => {-->
<!--            getStudents();-->
<!--            $('#studentTableInfo').hide();-->
<!--            $('#getStudentInfo').submit(function (e) {-->
<!--                e.preventDefault();-->
<!--                $.ajax({-->
<!--                    type: 'GET',-->
<!--                    url: '/api/students/' + $(this).find('[name=id]').val(),-->
<!--                    dataType: 'json',-->
<!--                    beforeSend: function (xhr) {-->
<!--                        xhr.setRequestHeader('Content-Type', 'application/json');-->
<!--                    },-->
<!--                    success: function (response) {-->
<!--                        studentInfo(response);-->
<!--                    }-->
<!--                });-->
<!--            });-->
<!--        }-->
<!--    );-->

<!--    function studentInfo(data) {-->
<!--        let $studentInfo = $('#studentInfo');-->
<!--        let $disciplines = $('#disciplines');-->

<!--        $('#studentTableInfo').show();-->
<!--        $studentInfo.empty();-->
<!--        $disciplines.empty();-->

<!--        $studentInfo.append(`<h3>` + data.fio + ', ' + data.course + `</h3>`);-->
<!--        data.enrollments.forEach(en => {-->
<!--            $disciplines.append('<tr><td>'-->
<!--                + en.discipline.dname + '</td><td>' + en.discipline.credits + '</td>' +-->
<!--                '<td>' + en.grade + '</td></tr>')-->
<!--        })-->
<!--    }-->

<!--    function getStudents() {-->
<!--        $.ajax({-->
<!--            url: '/api/students',-->
<!--            success: (response) => (setStudents(response))-->
<!--        })-->
<!--    }-->

<!--    function setStudents(data) {-->
<!--        let $students = $('#students');-->
<!--        $students.empty();-->
<!--        data.forEach(student => {-->
<!--            $students.append('<tr><td>' + student.id + '</td><td>' + student.fio + '</td><td>'-->
<!--                + student.course + '</td></tr>')-->
<!--        });-->
<!--    }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Client Server</title>
</head>
<body>
<div>
    <textarea id="message" style="width:300px" placeholder="Student Id"></textarea>
    <button id="ping" onclick="ping();">Ping</button>
</div>
<div>
    <h3>Students</h3>
    <div id="stack"></div>
</div>

<script type="text/javascript">
    ws = new WebSocket("ws://localhost:8080/studentsConnection");

    ws.onopen = function (ev){
        action('open connection');
    }

    ws.onmessage = function (ev){
        action(ev.data);
    }

    ws.onerror = function (ev){}
    ws.onclose = function (ev){}

    function action(message){
        let output = document.getElementById('stack');
        let newP = document.createElement('p');
        newP.appendChild(document.createTextNode(message));
        output.appendChild(newP);
    }

    function ping(){
        let message = document.getElementById('message').value;
        action('sent: ' + message);
        ws.send(message);
    }
</script>
</body>
</html>